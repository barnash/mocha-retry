{"version":3,"sources":["../source/retrySuite.js"],"names":[],"mappings":"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","file":"retrySuite.js","sourcesContent":["\"use strict\";\n\nimport {Suite} from \"mocha\";\nimport RetryHook from \"./retryHook\";\nimport {normalize} from \"./utils\";\n\nexport default class RetrySuite extends Suite {\n\n\tbeforeAllWithRetry() {\n\t\tif (this.pending) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst {times, title, fn} = normalize(this.times, ...arguments);\n\n\t\tconst hook = new RetryHook(times, `\"before all\" hook: ${title || \"--\"}`, fn);\n\t\thook.parent = this;\n\t\thook.timeout(this.timeout());\n\t\thook.slow(this.slow());\n\t\thook.ctx = this.ctx;\n\t\tthis._beforeAll.push(hook);\n\t\tthis.emit(\"beforeAll\", hook);\n\t}\n\n\tbeforeEachWithRetry() {\n\t\tif (this.pending) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst {times, title, fn} = normalize(this.times, ...arguments);\n\n\t\tconst hook = new RetryHook(times, `\"before each\" hook: ${title || \"--\"}`, fn);\n\t\thook.parent = this;\n\t\thook.timeout(this.timeout());\n\t\thook.slow(this.slow());\n\t\thook.ctx = this.ctx;\n\t\tthis._beforeEach.push(hook);\n\t\tthis.emit(\"beforeEach\", hook);\n\t}\n\n\tafterAllWithRetry() {\n\t\tif (this.pending) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst {times, title, fn} = normalize(this.times, ...arguments);\n\n\t\tconst hook = new RetryHook(times, `\"after all\" hook: ${title || \"--\"}`, fn);\n\t\thook.parent = this;\n\t\thook.timeout(this.timeout());\n\t\thook.slow(this.slow());\n\t\thook.ctx = this.ctx;\n\t\tthis._afterAll.push(hook);\n\t\tthis.emit(\"afterAll\", hook);\n\t}\n\n\tafterEachWithRetry() {\n\t\tif (this.pending) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst {times, title, fn} = normalize(this.times, ...arguments);\n\n\t\tconst hook = new RetryHook(times, `\"after each\" hook: ${title || \"--\"}`, fn);\n\t\thook.parent = this;\n\t\thook.timeout(this.timeout());\n\t\thook.slow(this.slow());\n\t\thook.ctx = this.ctx;\n\t\tthis._afterEach.push(hook);\n\t\tthis.emit(\"afterEach\", hook);\n\t}\n\n}\n"]}