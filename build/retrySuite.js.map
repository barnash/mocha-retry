{"version":3,"sources":["../source/retrySuite.js"],"names":[],"mappings":"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","file":"retrySuite.js","sourcesContent":["\"use strict\";\n\nimport {Suite} from \"mocha\";\nimport RetryHook from \"./retryHook\";\n\nSuite.prototype.beforeAllWithRetry = function (times, title, fn) {\n\tif (this.pending) {\n\t\treturn this;\n\t}\n\n\tif (!title) {\n\t\t[times, title, fn] = [void 0, times.name, times];\n\t} else if (!fn) {\n\t\tif (typeof times === \"number\") {\n\t\t\t[title, fn] = [void 0, title];\n\t\t} else {\n\t\t\t[times, title, fn] = [void 0, times, title];\n\t\t}\n\t\tif (typeof title === \"function\") {\n\t\t\t[title, fn] = [fn.name, title];\n\t\t}\n\t}\n\n\ttimes = times || this.times;\n\n\ttitle = \"\\\"before all\\\" hook\" + (title ? \": \" + title : \"\");\n\tconst hook = new RetryHook(times, title, fn);\n\thook.parent = this;\n\thook.timeout(this.timeout());\n\thook.slow(this.slow());\n\thook.ctx = this.ctx;\n\tthis._beforeAll.push(hook);\n\tthis.emit(\"beforeAll\", hook);\n\treturn this;\n};\n\nSuite.prototype.beforeEachWithRetry = function (times, title, fn) {\n\tif (this.pending) {\n\t\treturn this;\n\t}\n\n\tif (!title) {\n\t\t[times, title, fn] = [void 0, times.name, times];\n\t} else if (!fn) {\n\t\tif (typeof times === \"number\") {\n\t\t\t[title, fn] = [void 0, title];\n\t\t} else {\n\t\t\t[times, title, fn] = [void 0, times, title];\n\t\t}\n\t\tif (typeof title === \"function\") {\n\t\t\t[title, fn] = [fn.name, title];\n\t\t}\n\t}\n\n\ttimes = times || this.times;\n\n\ttitle = \"\\\"before each\\\" hook\" + (title ? \": \" + title : \"\");\n\tconst hook = new RetryHook(times, title, fn);\n\thook.parent = this;\n\thook.timeout(this.timeout());\n\thook.slow(this.slow());\n\thook.ctx = this.ctx;\n\tthis._beforeEach.push(hook);\n\tthis.emit(\"beforeEach\", hook);\n\treturn this;\n};\n\nSuite.prototype.afterAllWithRetry = function (times, title, fn) {\n\tif (this.pending) {\n\t\treturn this;\n\t}\n\n\tif (!title) {\n\t\t[times, title, fn] = [void 0, times.name, times];\n\t} else if (!fn) {\n\t\tif (typeof times === \"number\") {\n\t\t\t[title, fn] = [void 0, title];\n\t\t} else {\n\t\t\t[times, title, fn] = [void 0, times, title];\n\t\t}\n\t\tif (typeof title === \"function\") {\n\t\t\t[title, fn] = [fn.name, title];\n\t\t}\n\t}\n\n\ttimes = times || this.times;\n\n\ttitle = \"\\\"after all\\\" hook\" + (title ? \": \" + title : \"\");\n\tconst hook = new RetryHook(times, title, fn);\n\thook.parent = this;\n\thook.timeout(this.timeout());\n\thook.slow(this.slow());\n\thook.ctx = this.ctx;\n\tthis._afterAll.push(hook);\n\tthis.emit(\"afterAll\", hook);\n\treturn this;\n};\n\nSuite.prototype.afterEachWithRetry = function (times, title, fn) {\n\tif (this.pending) {\n\t\treturn this;\n\t}\n\n\tif (!title) {\n\t\t[times, title, fn] = [void 0, times.name, times];\n\t} else if (!fn) {\n\t\tif (typeof times === \"number\") {\n\t\t\t[title, fn] = [void 0, title];\n\t\t} else {\n\t\t\t[times, title, fn] = [void 0, times, title];\n\t\t}\n\t\tif (typeof title === \"function\") {\n\t\t\t[title, fn] = [fn.name, title];\n\t\t}\n\t}\n\n\ttimes = times || this.times;\n\n\ttitle = \"\\\"after each\\\" hook\" + (title ? \": \" + title : \"\");\n\tconst hook = new RetryHook(times, title, fn);\n\thook.parent = this;\n\thook.timeout(this.timeout());\n\thook.slow(this.slow());\n\thook.ctx = this.ctx;\n\tthis._afterEach.push(hook);\n\tthis.emit(\"afterEach\", hook);\n\treturn this;\n};\n"]}