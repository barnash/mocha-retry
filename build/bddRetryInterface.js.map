{"version":3,"sources":["../source/bddRetryInterface.js"],"names":[],"mappings":"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","file":"bddRetryInterface.js","sourcesContent":["(function() {\n  var createInterface;\n\n  module.exports = createInterface = function(Mocha) {\n    var RetryTest, Suite, interfaces, patchMochaSuite, utils;\n    RetryTest = require('./retryTest');\n    interfaces = Mocha.interfaces;\n    Suite = Mocha.Suite;\n    utils = Mocha.utils;\n    patchMochaSuite = require('./retrySuite');\n    patchMochaSuite(Mocha);\n    return interfaces.bddretry = function(suite) {\n      var suites;\n      suites = [suite];\n      return suite.on(\"pre-require\", function(context, file, mocha) {\n        context.before = function(times, name, fn) {\n          return suites[0].beforeAllWithRetry(times, name, fn);\n        };\n        context.after = function(times, name, fn) {\n          return suites[0].afterAllWithRetry(times, name, fn);\n        };\n        context.beforeEach = function(times, name, fn) {\n          return suites[0].beforeEachWithRetry(times, name, fn);\n        };\n        context.afterEach = function(times, name, fn) {\n          return suites[0].afterEachWithRetry(times, name, fn);\n        };\n        context.describe = context.context = function(times, title, fn) {\n          var asuite, ref;\n          if (fn == null) {\n            ref = [times, title], title = ref[0], fn = ref[1];\n            times = void 0;\n          }\n          if ((suites[0].times != null) && (times == null)) {\n            times = suites[0].times;\n          }\n          if ((context.DEFAULT_RETRY != null) && (times == null)) {\n            times = context.DEFAULT_RETRY;\n          }\n          asuite = Suite.create(suites[0], title);\n          asuite.times = times;\n          asuite.file = file;\n          suites.unshift(asuite);\n          fn.call(asuite);\n          suites.shift();\n          return asuite;\n        };\n        context.xdescribe = context.xcontext = context.describe.skip = function(times, title, fn) {\n          var asuite, ref;\n          if (fn == null) {\n            ref = [times, title], title = ref[0], fn = ref[1];\n            times = void 0;\n          }\n          asuite = Suite.create(suites[0], title);\n          asuite.pending = true;\n          suites.unshift(asuite);\n          fn.call(asuite);\n          return suites.shift();\n        };\n        context.describe.only = function(times, title, fn) {\n          var asuite;\n          asuite = context.describe(times, title, fn);\n          mocha.grep(asuite.fullTitle());\n          return asuite;\n        };\n        context.it = context.itretry = function(times, title, fn) {\n          var asuite, ref, test;\n          asuite = suites[0];\n          if ((fn == null) && typeof times !== 'number') {\n            ref = [times, title], title = ref[0], fn = ref[1];\n            times = asuite.times != null ? asuite.times : 1;\n          }\n          if (asuite.pending) {\n            fn = null;\n          }\n          test = new RetryTest(times, title, fn);\n          test.file = file;\n          asuite.addTest(test);\n          return test;\n        };\n        context.it.only = function(times, title, fn) {\n          var reString, test;\n          test = context.it(times, title, fn);\n          reString = \"^\" + utils.escapeRegexp(test.fullTitle()) + \"$\";\n          mocha.grep(new RegExp(reString));\n          return test;\n        };\n        return context.xit = context.xspecify = context.it.skip = function(times, title, fn) {\n          var ref;\n          if (title == null) {\n            return context.it(times);\n          }\n          if (fn == null) {\n            ref = [1, times, title], times = ref[0], title = ref[1], fn = ref[2];\n          }\n          return context.it(times, title);\n        };\n      });\n    };\n  };\n\n}).call(this);\n"]}